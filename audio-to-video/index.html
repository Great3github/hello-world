<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>make</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat&display=swap" rel="stylesheet">
    <style media="screen">
      html,
      body {
        height: 100%;
      }
      body {
        font-size: 0;
        background-color: black;
        margin: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        font-family: 'Montserrat', sans-serif;
      }
      canvas {
        max-width: 100%;
        max-height: 100%;
      }
    </style>
  </head>
  <body>
    <canvas id="canvas" width="1920" height="1080"></canvas>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.2.2/jszip.min.js" charset="utf-8"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.2/dist/FileSaver.min.js" charset="utf-8"></script>
    <script type="text/javascript">
const descriptions = {
  'a su alrededor partes.mp3': 'Cutting up Barrios\'s syllables',
  'after brandon rejoins 2.mp3': 'Spanish conversation',
  'attempting to say विष.wav': 'TFor Tim: /ˈʋi.ʂɐ/',
  'board meeting.wav': 'A concerned parent at a PAUSD board meeting.',
  'comparacionísima.mp3': 'Cultural comparison practice for AP Spanish',
  'conversacionnnn.wav': 'Simulated conversation practice for AP Spanish',
  'cut off.wav': 'A concerned parent took too long to speak their passion.',
  'desafortunado.wav': 'What it would sound like if it were an English word.',
  'gamepro5.wav': 'Parody of "makes me go YES"',
  'henry.mp3': 'Henry speaks against Zoom at the board meeting',
  'i yield my time.wav': 'Joshua yields his time with one second left',
  'mass spectrometer.mp3': 'Brandon diligently works on his chem assignment',
  'nikki etc.wav': 'Nikki ensures her microphone is of an appropriate volume',
  'no.mp3': 'Edmund says no',
  'output.wav': 'Intense chord',
  'outside trumpet.wav': 'Someone practices their trumpet outside at night',
  'pausd is rather quiet.wav': 'A different PAUSD meeting? June 4th.',
  'private schools.mp3': 'A concerned parent talks of private schools to PAUSD.',
  'reverb be YES.wav': 'Reverb makes me go',
  'unnamed_person_in_esperanto.mp3': 'From Steven, from Google Translate',
  'vīrus and ἰός maybe.wav': 'Attempting to say words for Timothy from IPA',
  'what\'s up.mp3': 'Brandon joins',
  'yang.wav': 'Joshua Yang makes his case at a PAUSD board meeting'
}

const canvas = document.getElementById('canvas')
const c = canvas.getContext('2d')
const radius = Math.hypot(canvas.width, canvas.height) / 2
function makeImage (filename, description) {
  const angle = Math.random() * 2 * Math.PI
  const gradient = c.createLinearGradient(
    canvas.width / 2 + Math.cos(angle) * radius,
    canvas.height / 2 + Math.sin(angle) * radius,
    canvas.width / 2 - Math.cos(angle) * radius,
    canvas.height / 2 - Math.sin(angle) * radius
  )
  gradient.addColorStop(0, '#' + Math.floor(Math.random() * 0x1000000).toString(16).padStart(6, '0'))
  gradient.addColorStop(1, '#' + Math.floor(Math.random() * 0x1000000).toString(16).padStart(6, '0'))
  c.fillStyle = gradient
  c.fillRect(0, 0, canvas.width, canvas.height)
  c.textAlign = 'center'
  c.textBaseline = 'middle'
  c.fillStyle = 'white'
  c.strokeStyle = 'rgba(0, 0, 0, 0.2)'
  c.lineWidth = canvas.height * 0.005
  c.font = `${canvas.height * 0.1}px "Montserrat", sans-serif`
  c.strokeText(filename, canvas.width / 2, canvas.height / 3, canvas.width)
  c.fillText(filename, canvas.width / 2, canvas.height / 3, canvas.width)
  c.font = `${canvas.height * 0.05}px "Montserrat", sans-serif`
  c.strokeText(description, canvas.width / 2, 2 * canvas.height / 3, canvas.width)
  c.fillText(description, canvas.width / 2, 2 * canvas.height / 3, canvas.width)
  return canvas.toDataURL().slice('data:image/png;base64,'.length)
}

function wait (ms) {
  return new Promise(resolve => setTimeout(resolve, ms))
}

async function main () {
  const zip = new JSZip()
  for (const [filename, description] of Object.entries(descriptions)) {
    zip.file(filename + '.png', makeImage(filename, description), { base64: true })
    await wait(100)
  }
  saveAs(await zip.generateAsync({ type: 'blob' }), 'thumbnails.zip')
}

main()
    </script>
  </body>
</html>
